# Audit Report - 2026-01-15

## Summary

- üî¥ Critical Issues: 0
- üü° Warnings: 3
- üü¢ Suggestions: 2

## üî¥ Critical Issues (Ph·∫£i s·ª≠a ngay)

*Kh√¥ng t√¨m th·∫•y v·∫•n ƒë·ªÅ b·∫£o m·∫≠t nghi√™m tr·ªçng n√†o.*

## üü° Warnings (N√™n s·ª≠a)

1. **Mutable Default Argument Pattern (`javinizer/sorter.py`)**
   - **M√¥ t·∫£:** Trong class `SortConfig`, field `output_folder` ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a l√† `= None` r·ªìi g√°n `[]` trong `__post_init__`.
   - **T·∫°i sao:** C√°ch n√†y h∆°i "th·ªß c√¥ng" v√† l√†m type checker `mypy` ph·∫£i suppress warning (`type: ignore`).
   - **C√°ch s·ª≠a:** D√πng `field(default_factory=list)` chu·∫©n c·ªßa `dataclasses`.

2. **Global Console Instance (`javinizer/sorter.py`)**
   - **M√¥ t·∫£:** `console = Console()` ƒë∆∞·ª£c khai b√°o to√†n c·ª•c ·ªü d√≤ng 14.
   - **T·∫°i sao:** Khi import module n√†y v√†o test ho·∫∑c GUI, n√≥ s·∫Ω kh·ªüi t·∫°o `rich.Console` kh√¥ng c·∫ßn thi·∫øt, c√≥ th·ªÉ g√¢y side-effect v·ªõi stdout.
   - **C√°ch s·ª≠a:** Di chuy·ªÉn v√†o trong h√†m ho·∫∑c d√πng dependency injection/global logger singleton chu·∫©n.

3. **Unused Imports in Tests (Ruff Check)**
   - **M√¥ t·∫£:** C√°c file test (`tests/test_csv_utils.py`, `tests/test_javbus.py`) c√≥ import th·ª´a (`pathlib`, `pytest`, `os`).
   - **T·∫°i sao:** L√†m code r√°c, r·ªëi m·∫Øt.
   - **C√°ch s·ª≠a:** X√≥a import th·ª´a (Ruff c√≥ th·ªÉ auto-fix).

## üü¢ Suggestions (T√πy ch·ªçn)

1. **Filename Sanitization**
   - H√†m `sanitize_filename` hi·ªán t·∫°i ch·ªâ replace `/` b·∫±ng `-` v√† x√≥a c√°c k√Ω t·ª± kh√°c.
   - **N√™n:** C√¢n nh·∫Øc thay `:` b·∫±ng `-` lu√¥n (v√¨ JAV hay c√≥ format `Label: Title`).

2. **Strict Type Hinting**
   - M·ªôt s·ªë ch·ªó trong `sorter.py` n√™n c√≥ type hint ch·∫∑t ch·∫Ω h∆°n (v√≠ d·ª• return type c·ªßa `execute_sort` l√† `bool` nh∆∞ng c√≥ th·ªÉ throw exception m√† kh√¥ng catch h·∫øt ·ªü caller).

## Next Steps

- Run `/refactor` to apply fixes.
